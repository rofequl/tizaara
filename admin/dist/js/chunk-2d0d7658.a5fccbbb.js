(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7658"],{7746:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-sm-6 text-center text-sm-left mb-4 mb-sm-0"},[o("span",{staticClass:"text-uppercase page-subtitle"},[t._v(" "+t._s(t.$t("message.quotation.marketing"))+" ")]),o("h3",{staticClass:"page-title"},[t._v(t._s(t.$t("message.quotation.quotation_list")))])])]),o("div",{staticClass:"dataTables_wrapper no-footer my-5",attrs:{id:"people"}},[o("v-client-table",{staticClass:"text-center",attrs:{data:Object.values(t.quotationList),columns:t.columns,options:t.options},scopedSlots:t._u([{key:"full_name",fn:function(e){return o("div",{},[e.row.user?o("p",[t._v(t._s(e.row.user.full_name))]):t._e()])}},{key:"mobile",fn:function(e){return o("div",{},[e.row.user?o("p",[t._v(t._s(e.row.user.mobile))]):t._e()])}},{key:"action",fn:function(e){return o("div",{},[o("CButtonGroup",{staticClass:"mx-1",attrs:{size:"sm"}},[0===e.row.status&&0===e.row.is_cancel?[o("CButton",{attrs:{color:"primary"},on:{click:function(o){return t.accept(e.row.id)}}},[t._v(" Accept ")]),o("CButton",{attrs:{color:"danger"},on:{click:function(o){return t.cancel(e.row.id)}}},[t._v(" Cancel ")])]:1===e.row.status&&0===e.row.is_cancel?[o("CButton",{attrs:{color:"secondary"},on:{click:function(o){return t.openQuotationEdit(e.row)}}},[o("font-awesome-icon",{attrs:{icon:"edit"}})],1),o("CButton",{attrs:{color:"secondary"},on:{click:function(o){return t.openSupplierModal(e.row)}}},[o("i",{staticClass:"fa fa-eye"},[t._v("View")])]),o("CButton",{attrs:{color:"secondary"},on:{click:function(o){return t.deleteQuotation(e.row.id)}}},[o("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1)]:[o("span",{staticStyle:{color:"red"}},[t._v("Canceled")])]],2)],1)}}])})],1),o("b-modal",{attrs:{id:"adminModal",title:"Supplier assign","hide-footer":""}},[o("b-form",{on:{submit:function(e){return e.preventDefault(),t.updateQuotation(e)},keydown:function(e){return t.form.onKeydown(e)}}},[o("b-form-group",{attrs:{label:"Email  address :","label-cols-sm":"5","label-cols-lg":"4"}},[o("b-form-input",{attrs:{readonly:"",disabled:"",placeholder:"Quotation mail"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),o("CRow",[o("CCol",{staticClass:"mb-3 mb-xl-5",attrs:{col:"6",sm:"4",md:"4"}},[t._v(" "+t._s(t.$t("message.quotation.select_supplier"))+" ")]),o("CCol",{staticClass:"mb-3 mb-xl-0",attrs:{col:"6",sm:"8",md:"8"}},[o("v-select",{attrs:{label:"first_name",filterable:!1,options:t.supplier,reduce:function(t){return t.id},placeholder:"Search Supplier by name, phone number",multiple:""},on:{search:t.onSearch,input:t.addNewSupplier},scopedSlots:t._u([{key:"option",fn:function(e){var s=e.first_name,n=e.last_name;return[o("div",{staticClass:"d-center"},[t._v(" "+t._s(s+" "+n)+" ")])]}},{key:"selected-option",fn:function(e){return[o("div",{staticClass:"selected d-center"},[t._v(" "+t._s(e.first_name+" "+e.last_name)+" ")])]}}])},[o("template",{slot:"no-options"},[t._v(" "+t._s(t.$t("message.quotation.type_search_supplier"))+" ")])],2)],1)],1),o("CRow",{staticClass:"justify-content-end"},[o("CCol",{staticClass:"mb-3 mb-xl-0",attrs:{col:"4",sm:"4",md:"3"}},[o("CButton",{attrs:{block:"",color:"info",type:"submit",disabled:t.form.busy}},[t.form.busy?o("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t.form.busy?o("span",{staticClass:"sr-only"},[t._v(t._s(t.$t("message.quotation.loading")))]):t._e(),t._v(" Update ")])],1),o("CCol",{staticClass:"mb-3 mb-xl-0",attrs:{col:"4",sm:"4",md:"3"}},[o("CButton",{attrs:{block:"",color:"dark"},on:{click:function(e){return t.$bvModal.hide("adminModal")}}},[t._v("Close")])],1)],1)],1)],1),o("b-modal",{attrs:{id:"supplierModal",title:"Assigned Supplier","hide-footer":""}},[o("table",{staticClass:"table table-responsive"},[o("tr",[o("td",[t._v("Supplier Name")]),o("td",[t._v("Phone Number")]),o("td",[t._v("Status")]),o("td",[t._v("Response time")])]),t._l(t.quotation_history,(function(e,s){return o("tr",{key:s},[o("td",[t._v(t._s(e.user.full_name))]),o("td",[t._v(t._s(e.user.mobile))]),o("td",[o("p",{style:1==e.status?"color:green":"color:red"},[t._v(t._s(t.status[e.status]))])]),o("td",[e.response_at?[t._v(" "+t._s(t.moment(e.response_at).startOf("hour").from(e.created_at))+" ")]:t._e()],2)])}))],2)])],1)},n=[],a=o("2ef0"),r=o.n(a),i=o("2f62"),c=o("bf55"),l=o("7b99"),u=o("c1df"),m=o.n(u);function d(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,s)}return o}function f(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?d(Object(o),!0).forEach((function(e){p(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function p(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var _={name:"quotation",data:function(){return{moment:m.a,form:new Form({id:"",email:"",user_ids:""}),supplier:[],columns:["full_name","mobile","product","details","quantity","action"],options:{headings:{full_name:"Name",mobile:"Phone Number",product:"Product / Service",quantity:"Quantity"},sortable:[],filterable:["full_name","mobile","product"]},quotation_history:[],status:{0:"pending",1:"accept",2:"cancel"}}},methods:{openQuotationEdit:function(t){this.form.reset(),this.form.clear(),this.form.email=t.user?t.user.email:null,this.form.id=t.id,this.$bvModal.show("adminModal")},openSupplierModal:function(t){this.quotation_history=t.quotation_users,this.$bvModal.show("supplierModal")},deleteQuotation:function(t){var e=this;swal.fire({title:this.$t("message.quotation.are_you_sure"),text:this.$t("message.quotation.able_to_revert"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.$t("message.quotation.delete_it")}).then((function(o){o.value&&e.form.delete("quotation/"+t).then((function(o){"Error"===o.data.result?swal.fire(e.$t("message.common.error"),o.data.message,"warning"):(swal.fire(e.$t("message.common.deleted"),e.$t("message.quotation.quotation_deleted"),e.$t("message.common.succes")),e.$store.commit(c["d"],t))})).catch((function(){swal(e.$t("message.common.error"),e.$t("message.common.something_wrong"),"warning")}))}))},accept:function(t){var e=this;swal.fire({title:this.$t("message.quotation.are_you_sure"),text:this.$t("message.quotation.able_to_revert"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.$t("message.quotation.yes")}).then((function(o){o.value&&e.form.put("quotation/request/accept".concat(t)).then((function(o){"Error"===o.data.result?swal.fire(e.$t("message.common.error"),o.data.message,"warning"):(swal.fire(e.$t("message.common.succes"),o.data.message),e.$store.commit(c["c"],t))})).catch((function(){swal(e.$t("message.common.error"),e.$t("message.common.something_wrong"),"warning")}))}))},cancel:function(t){var e=this;swal.fire({title:this.$t("message.quotation.are_you_sure"),text:this.$t("message.quotation.able_to_revert"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.$t("message.quotation.yes")}).then((function(o){o.value&&e.form.put("quotation/request/cancel".concat(t)).then((function(o){"Error"===o.data.result?swal.fire(e.$t("message.common.error"),o.data.message,"warning"):(swal.fire(o.data.message,e.$t("message.common.succes")),e.$store.commit(c["a"],t))})).catch((function(){swal(e.$t("message.common.error"),e.$t("message.common.something_wrong"),"warning")}))}))},onSearch:function(t,e){e(!0),this.search(e,t,this)},search:r.a.debounce((function(t,e,o){var s="user/supplier-search?searchSupplier="+e;l["a"].get(s).then((function(e){o.supplier=e.data,t(!1)}))}),350),addNewSupplier:function(t){this.form.user_ids=t},updateQuotation:function(){var t=this;this.form.put("quotation/"+this.form.id).then((function(){t.$bvModal.hide("adminModal"),toast.fire({icon:"success",title:t.$t("message.quotation.supplier_assign_successfully")})})).catch((function(e){var o=e.response;if(422===o.status){var s="";$.each(o.data.errors,(function(t,e){$.isPlainObject(e)?$.each(e,(function(t,e){e+"<br/>"})):s+=e+"<br/>"})),swal.fire({title:"Warning",html:s,type:"error"})}else swal.fire(t.$t("message.common.error"),t.$t("message.common.something_wrong"),"warning")}))}},created:function(){this.$store.dispatch(c["b"])},computed:f({},Object(i["b"])(["quotationList"]))},b=_,h=o("2877"),g=Object(h["a"])(b,s,n,!1,null,"68a5aa04",null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2d0d7658.a5fccbbb.js.map