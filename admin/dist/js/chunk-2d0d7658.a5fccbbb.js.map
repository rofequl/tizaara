{"version":3,"sources":["webpack:///./src/components/marketing/Quotation.vue?742a","webpack:///src/components/marketing/Quotation.vue","webpack:///./src/components/marketing/Quotation.vue?2f61","webpack:///./src/components/marketing/Quotation.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$t","attrs","Object","values","quotationList","columns","options","scopedSlots","_u","key","fn","props","row","user","full_name","_e","mobile","status","is_cancel","on","$event","accept","id","cancel","openQuotationEdit","openSupplierModal","deleteQuotation","staticStyle","preventDefault","updateQuotation","form","onKeydown","model","value","callback","$$v","$set","expression","supplier","name","onSearch","addNewSupplier","ref","first_name","last_name","slot","busy","$bvModal","hide","_l","his","style","moment","response_at","startOf","from","created_at","staticRenderFns","data","Form","email","user_ids","headings","product","quantity","sortable","filterable","quotation_history","0","1","2","methods","reset","clear","show","swal","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","result","loading","search","e","put","created","$store","dispatch","computed","component"],"mappings":"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","file":"js/chunk-2d0d7658.a5fccbbb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12 col-sm-6 text-center text-sm-left mb-4 mb-sm-0\"},[_c('span',{staticClass:\"text-uppercase page-subtitle\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"message.quotation.marketing\"))+\" \")]),_c('h3',{staticClass:\"page-title\"},[_vm._v(_vm._s(_vm.$t(\"message.quotation.quotation_list\")))])])]),_c('div',{staticClass:\"dataTables_wrapper no-footer my-5\",attrs:{\"id\":\"people\"}},[_c('v-client-table',{staticClass:\"text-center\",attrs:{\"data\":Object.values(_vm.quotationList),\"columns\":_vm.columns,\"options\":_vm.options},scopedSlots:_vm._u([{key:\"full_name\",fn:function(props){return _c('div',{},[(props.row.user)?_c('p',[_vm._v(_vm._s(props.row.user.full_name))]):_vm._e()])}},{key:\"mobile\",fn:function(props){return _c('div',{},[(props.row.user)?_c('p',[_vm._v(_vm._s(props.row.user.mobile))]):_vm._e()])}},{key:\"action\",fn:function(props){return _c('div',{},[_c('CButtonGroup',{staticClass:\"mx-1\",attrs:{\"size\":\"sm\"}},[(props.row.status === 0 && props.row.is_cancel===0)?[_c('CButton',{attrs:{\"color\":\"primary\"},on:{\"click\":function($event){return _vm.accept(props.row.id)}}},[_vm._v(\" Accept \")]),_c('CButton',{attrs:{\"color\":\"danger\"},on:{\"click\":function($event){return _vm.cancel(props.row.id)}}},[_vm._v(\" Cancel \")])]:(props.row.status === 1 && props.row.is_cancel===0)?[_c('CButton',{attrs:{\"color\":\"secondary\"},on:{\"click\":function($event){return _vm.openQuotationEdit(props.row)}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"edit\"}})],1),_c('CButton',{attrs:{\"color\":\"secondary\"},on:{\"click\":function($event){return _vm.openSupplierModal(props.row)}}},[_c('i',{staticClass:\"fa fa-eye\"},[_vm._v(\"View\")])]),_c('CButton',{attrs:{\"color\":\"secondary\"},on:{\"click\":function($event){return _vm.deleteQuotation(props.row.id)}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"trash-alt\"}})],1)]:[_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"Canceled\")])]],2)],1)}}])})],1),_c('b-modal',{attrs:{\"id\":\"adminModal\",\"title\":\"Supplier assign\",\"hide-footer\":\"\"}},[_c('b-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.updateQuotation($event)},\"keydown\":function($event){return _vm.form.onKeydown($event)}}},[_c('b-form-group',{attrs:{\"label\":\"Email  address :\",\"label-cols-sm\":\"5\",\"label-cols-lg\":\"4\"}},[_c('b-form-input',{attrs:{\"readonly\":\"\",\"disabled\":\"\",\"placeholder\":\"Quotation mail\"},model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}})],1),_c('CRow',[_c('CCol',{staticClass:\"mb-3 mb-xl-5\",attrs:{\"col\":\"6\",\"sm\":\"4\",\"md\":\"4\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"message.quotation.select_supplier\"))+\" \")]),_c('CCol',{staticClass:\"mb-3 mb-xl-0\",attrs:{\"col\":\"6\",\"sm\":\"8\",\"md\":\"8\"}},[_c('v-select',{attrs:{\"label\":\"first_name\",\"filterable\":false,\"options\":_vm.supplier,\"reduce\":function (name) { return name.id; },\"placeholder\":\"Search Supplier by name, phone number\",\"multiple\":\"\"},on:{\"search\":_vm.onSearch,\"input\":_vm.addNewSupplier},scopedSlots:_vm._u([{key:\"option\",fn:function(ref){\nvar first_name = ref.first_name;\nvar last_name = ref.last_name;\nreturn [_c('div',{staticClass:\"d-center\"},[_vm._v(\" \"+_vm._s(first_name + ' ' + last_name)+\" \")])]}},{key:\"selected-option\",fn:function(supplier){return [_c('div',{staticClass:\"selected d-center\"},[_vm._v(\" \"+_vm._s(supplier.first_name + ' ' + supplier.last_name)+\" \")])]}}])},[_c('template',{slot:\"no-options\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"message.quotation.type_search_supplier\"))+\" \")])],2)],1)],1),_c('CRow',{staticClass:\"justify-content-end\"},[_c('CCol',{staticClass:\"mb-3 mb-xl-0\",attrs:{\"col\":\"4\",\"sm\":\"4\",\"md\":\"3\"}},[_c('CButton',{attrs:{\"block\":\"\",\"color\":\"info\",\"type\":\"submit\",\"disabled\":_vm.form.busy}},[(_vm.form.busy)?_c('span',{staticClass:\"spinner-border spinner-border-sm\",attrs:{\"role\":\"status\",\"aria-hidden\":\"true\"}}):_vm._e(),(_vm.form.busy)?_c('span',{staticClass:\"sr-only\"},[_vm._v(_vm._s(_vm.$t(\"message.quotation.loading\")))]):_vm._e(),_vm._v(\" Update \")])],1),_c('CCol',{staticClass:\"mb-3 mb-xl-0\",attrs:{\"col\":\"4\",\"sm\":\"4\",\"md\":\"3\"}},[_c('CButton',{attrs:{\"block\":\"\",\"color\":\"dark\"},on:{\"click\":function($event){return _vm.$bvModal.hide('adminModal')}}},[_vm._v(\"Close\")])],1)],1)],1)],1),_c('b-modal',{attrs:{\"id\":\"supplierModal\",\"title\":\"Assigned Supplier\",\"hide-footer\":\"\"}},[_c('table',{staticClass:\"table table-responsive\"},[_c('tr',[_c('td',[_vm._v(\"Supplier Name\")]),_c('td',[_vm._v(\"Phone Number\")]),_c('td',[_vm._v(\"Status\")]),_c('td',[_vm._v(\"Response time\")])]),_vm._l((_vm.quotation_history),function(his,key){return _c('tr',{key:key},[_c('td',[_vm._v(_vm._s(his.user.full_name))]),_c('td',[_vm._v(_vm._s(his.user.mobile))]),_c('td',[_c('p',{style:(his.status==1?'color:green':'color:red')},[_vm._v(_vm._s(_vm.status[his.status]))])]),_c('td',[(his.response_at)?[_vm._v(\" \"+_vm._s(_vm.moment(his.response_at).startOf('hour').from(his.created_at))+\" \")]:_vm._e()],2)])})],2)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- Page Header -->\n    <div class=\"row\">\n      <div class=\"col-12 col-sm-6 text-center text-sm-left mb-4 mb-sm-0\">\n        <span class=\"text-uppercase page-subtitle\"> {{$t(\"message.quotation.marketing\")}}\n        </span>\n        <h3 class=\"page-title\">{{$t(\"message.quotation.quotation_list\")}}</h3>\n      </div>\n    </div>\n    <!-- End Page Header -->\n\n    <!-- Datatable -->\n    <div id=\"people\" class=\"dataTables_wrapper no-footer my-5\">\n      <v-client-table :data=\"Object.values(quotationList)\" :columns=\"columns\" class=\"text-center\"\n                      :options=\"options\">\n        <div slot=\"full_name\" slot-scope=\"props\">\n          <p v-if=\"props.row.user\">{{props.row.user.full_name}}</p>\n        </div>\n        <div slot=\"mobile\" slot-scope=\"props\">\n          <p v-if=\"props.row.user\">{{props.row.user.mobile}}</p>\n        </div>\n        <div slot=\"action\" slot-scope=\"props\">\n          <CButtonGroup size=\"sm\" class=\"mx-1\">\n            <template v-if=\"props.row.status === 0 && props.row.is_cancel===0\">\n              <CButton color=\"primary\" @click=\"accept(props.row.id)\">\n                Accept\n              </CButton>\n              <CButton color=\"danger\" @click=\"cancel(props.row.id)\">\n                Cancel\n              </CButton>\n            </template>\n            <template v-else-if=\"props.row.status === 1 && props.row.is_cancel===0\">\n              <CButton color=\"secondary\" @click=\"openQuotationEdit(props.row)\">\n                <font-awesome-icon icon=\"edit\"/>\n              </CButton>\n              <CButton color=\"secondary\" @click=\"openSupplierModal(props.row)\">\n                <i class=\"fa fa-eye\">View</i>\n              </CButton>\n              <CButton color=\"secondary\" @click=\"deleteQuotation(props.row.id)\">\n                <font-awesome-icon icon=\"trash-alt\"/>\n              </CButton>\n            </template>\n            <template v-else>\n              <span style=\"color: red\">Canceled</span>\n            </template>\n          </CButtonGroup>\n        </div>\n      </v-client-table>\n    </div>\n    <!-- End Datatable -->\n    <!-- Modal -->\n    <b-modal id=\"adminModal\" title=\"Supplier assign\"\n             hide-footer>\n      <b-form @submit.prevent=\"updateQuotation\" @keydown=\"form.onKeydown($event)\">\n        <b-form-group label=\"Email  address :\"\n                      label-cols-sm=\"5\"\n                      label-cols-lg=\"4\">\n          <b-form-input\n              v-model=\"form.email\" readonly disabled\n              placeholder=\"Quotation mail\"\n          ></b-form-input>\n        </b-form-group>\n        <CRow>\n          <CCol col=\"6\" sm=\"4\" md=\"4\" class=\"mb-3 mb-xl-5\">\n            {{$t(\"message.quotation.select_supplier\")}}\n          </CCol>\n          <CCol col=\"6\" sm=\"8\" md=\"8\" class=\"mb-3 mb-xl-0\">\n            <v-select label=\"first_name\" :filterable=\"false\" :options=\"supplier\" @search=\"onSearch\"\n                      @input=\"addNewSupplier\"\n                      :reduce=\"name => name.id\" placeholder=\"Search Supplier by name, phone number\" multiple>\n              <template slot=\"no-options\">\n                {{$t(\"message.quotation.type_search_supplier\")}}\n              </template>\n              <template #option=\"{ first_name, last_name }\">\n                <div class=\"d-center\">\n                  {{ first_name + ' ' + last_name }}\n                </div>\n              </template>\n              <template slot=\"selected-option\" slot-scope=\"supplier\">\n                <div class=\"selected d-center\">\n                  {{ supplier.first_name + ' ' + supplier.last_name }}\n                </div>\n              </template>\n            </v-select>\n          </CCol>\n        </CRow>\n        <CRow class=\"justify-content-end\">\n          <CCol col=\"4\" sm=\"4\" md=\"3\" class=\"mb-3 mb-xl-0\">\n            <CButton block color=\"info\" type=\"submit\" :disabled=\"form.busy\">\n              <span v-if=\"form.busy\" class=\"spinner-border spinner-border-sm\" role=\"status\"\n                    aria-hidden=\"true\"></span>\n              <span v-if=\"form.busy\" class=\"sr-only\">{{$t(\"message.quotation.loading\")}}</span>\n              Update\n            </CButton>\n          </CCol>\n          <CCol col=\"4\" sm=\"4\" md=\"3\" class=\"mb-3 mb-xl-0\">\n            <CButton block color=\"dark\" @click=\"$bvModal.hide('adminModal')\">Close</CButton>\n          </CCol>\n        </CRow>\n      </b-form>\n    </b-modal>\n    <!-- End Modal -->\n\n    <!-- Modal -->\n    <b-modal id=\"supplierModal\" title=\"Assigned Supplier\"\n             hide-footer>\n      <table class=\"table table-responsive\">\n        <tr>\n          <td>Supplier Name</td>\n          <td>Phone Number</td>\n          <td>Status</td>\n          <td>Response time</td>\n        </tr>\n        <tr v-for=\"(his,key) in quotation_history\" :key=\"key\">\n          <td>{{his.user.full_name}}</td>\n          <td>{{his.user.mobile}}</td>\n          <td>\n            <p :style=\"his.status==1?'color:green':'color:red'\">{{ status[his.status]}}</p>\n          </td>\n          <td>\n            <template v-if=\"his.response_at\">\n              {{ moment(his.response_at).startOf('hour').from(his.created_at)}}\n            </template>\n          </td>\n        </tr>\n      </table>\n    </b-modal>\n    <!-- End Modal -->\n\n  </div>\n</template>\n\n<script>\nimport _ from 'lodash';\nimport {mapGetters} from \"vuex\";\nimport {QUOTATION_LIST, QUOTATION_MODIFY, QUOTATION_REMOVE} from \"@/core/services/store/module/quotation\";\nimport ApiService from \"@/core/services/api.service\";\nimport {QUOTATION_CANCEL} from \"../../core/services/store/module/quotation\";\nimport moment from 'moment'\nexport default {\n  name: \"quotation\",\n  data() {\n    return {\n      moment,\n      form: new Form({\n        id: '',\n        email: '',\n        user_ids: '',\n      }),\n      supplier: [],\n      columns: ['full_name','mobile', 'product', 'details', 'quantity', 'action'],\n      options: {\n        headings: {\n          full_name: 'Name',\n          mobile: 'Phone Number',\n          product: 'Product / Service',\n          quantity: 'Quantity',\n        },\n        sortable: [],\n        filterable: ['full_name','mobile', 'product']\n      },\n      quotation_history:[],\n      status: {\n        0: 'pending',\n        1: 'accept',\n        2: 'cancel',\n      },\n    }\n  },\n  methods: {\n    openQuotationEdit(data) {\n      this.form.reset();\n      this.form.clear();\n      this.form.email = data.user?data.user.email:null;\n      this.form.id = data.id;\n      this.$bvModal.show('adminModal');\n    },\n    /*\n    * method for supplier modal\n    * */\n    openSupplierModal(data){\n      this.quotation_history=data.quotation_users;\n      this.$bvModal.show('supplierModal');\n    },\n    deleteQuotation(id) {\n      swal.fire({\n        title:  this.$t(\"message.quotation.are_you_sure\"),\n        text: this.$t(\"message.quotation.able_to_revert\"),\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: this.$t(\"message.quotation.delete_it\")\n      }).then((result) => {\n        if (result.value) {\n          this.form.delete('quotation/' + id)\n              .then((data) => {\n                if (data.data.result === 'Error') {\n                  swal.fire(this.$t(\"message.common.error\"), data.data.message, 'warning')\n                } else {\n                  swal.fire(\n                      this.$t(\"message.common.deleted\"),\n                      this.$t(\"message.quotation.quotation_deleted\"),\n                      this.$t(\"message.common.succes\")\n                  )\n                  this.$store.commit(QUOTATION_REMOVE, id);\n                }\n              })\n              .catch(() => {\n                swal(this.$t(\"message.common.error\"), this.$t(\"message.common.something_wrong\"), 'warning')\n              });\n        }\n      })\n    },\n    /*\n    * method for accept request\n    * */\n    accept(id) {\n      swal.fire({\n        title:  this.$t(\"message.quotation.are_you_sure\"),\n        text: this.$t(\"message.quotation.able_to_revert\"),\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: this.$t(\"message.quotation.yes\")\n      }).then((result) => {\n        if (result.value) {\n          this.form.put(`quotation/request/accept${id}`)\n              .then((data) => {\n                if (data.data.result === 'Error') {\n                  swal.fire(this.$t(\"message.common.error\"), data.data.message, 'warning')\n                } else {\n                  swal.fire(\n                      this.$t(\"message.common.succes\"),\n                      data.data.message,\n                  )\n                  this.$store.commit(QUOTATION_MODIFY, id);\n                }\n              })\n              .catch(() => {\n                swal(this.$t(\"message.common.error\"), this.$t(\"message.common.something_wrong\"), 'warning')\n              });\n        }\n      })\n    },\n    cancel(id) {\n      swal.fire({\n        title:  this.$t(\"message.quotation.are_you_sure\"),\n        text: this.$t(\"message.quotation.able_to_revert\"),\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: this.$t(\"message.quotation.yes\")\n      }).then((result) => {\n        if (result.value) {\n          this.form.put(`quotation/request/cancel${id}`)\n              .then((data) => {\n                if (data.data.result === 'Error') {\n                  swal.fire(this.$t(\"message.common.error\"), data.data.message, 'warning')\n                } else {\n                  swal.fire(\n                      data.data.message,\n                      this.$t(\"message.common.succes\")\n                  )\n                  this.$store.commit(QUOTATION_CANCEL, id);\n                }\n              })\n              .catch(() => {\n                swal(this.$t(\"message.common.error\"), this.$t(\"message.common.something_wrong\"), 'warning')\n              });\n        }\n      })\n    },\n    onSearch(search, loading) {\n      loading(true);\n      this.search(loading, search, this);\n    },\n    search: _.debounce((loading, search, vm) => {\n      let url = 'user/supplier-search?searchSupplier=' + search;\n      ApiService.get(url)\n          .then(res => {\n            vm.supplier = res.data;\n            loading(false);\n          });\n    }, 350),\n    addNewSupplier(e) {\n      this.form.user_ids = e;\n    },\n    updateQuotation() {\n      this.form.put('quotation/' + this.form.id)\n          .then(() => {\n            this.$bvModal.hide('adminModal');\n            toast.fire({\n              icon: 'success',\n              title: this.$t(\"message.quotation.supplier_assign_successfully\")\n            });\n          })\n          .catch((error) => {\n            let data = error.response;\n            if (data.status === 422) {\n              let allData = '', mainData = '';\n              $.each(data.data.errors, function (key, value) {\n                if ($.isPlainObject(value)) {\n                  $.each(value, function (key, value) {\n                    allData += value + \"<br/>\";\n                  });\n                } else {\n                  mainData += value + \"<br/>\";\n                }\n              });\n              swal.fire({\n                title: 'Warning',\n                html: mainData,\n                type: 'error'\n              })\n            } else {\n              swal.fire(this.$t(\"message.common.error\"), this.$t(\"message.common.something_wrong\"), 'warning')\n            }\n          })\n    }\n  },\n  created() {\n    this.$store.dispatch(QUOTATION_LIST)\n  },\n  computed: {\n    ...mapGetters([\"quotationList\"])\n  },\n}\n</script>\n\n<style scoped>\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Quotation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Quotation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Quotation.vue?vue&type=template&id=68a5aa04&scoped=true&\"\nimport script from \"./Quotation.vue?vue&type=script&lang=js&\"\nexport * from \"./Quotation.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"68a5aa04\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}